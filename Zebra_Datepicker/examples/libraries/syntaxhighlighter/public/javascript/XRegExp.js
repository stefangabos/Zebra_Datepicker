var XRegExp;if(XRegExp)throw Error("can't load XRegExp twice in the same frame"); (function(j){var m,i,n,t,u;function k(a,b){if(!XRegExp.isRegExp(a))throw TypeError("type RegExp expected");var c=a._xregexp,a=XRegExp(a.source,v(a)+(b||""));c&&(a._xregexp={source:c.source,captureNames:c.captureNames?c.captureNames.slice(0):null});return a}function v(a){return(a.global?"g":"")+(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.extended?"x":"")+(a.sticky?"y":"")}function z(a,b,c,e){var d=p.length,g,f,h;q=!0;try{for(;d--;)if(h=p[d],c&h.scope&&(!h.trigger||h.trigger.call(e)))if(h.pattern.lastIndex= b,(f=h.pattern.exec(a))&&f.index===b){g={output:h.handler.call(e,f,c),match:f};break}}catch(l){throw l;}finally{q=!1}return g}function r(a,b,c){if(Array.prototype.indexOf)return a.indexOf(b,c);for(c=c||0;c<a.length;c++)if(a[c]===b)return c;return-1}XRegExp=function(a,b){var c=[],e=XRegExp.OUTSIDE_CLASS,d=0,g,f;if(XRegExp.isRegExp(a)){if(b!==j)throw TypeError("can't supply flags when constructing one RegExp from another");return k(a)}if(q)throw Error("can't call the XRegExp constructor within token definition functions"); b=b||"";for(g={hasNamedCapture:!1,captureNames:[],hasFlag:function(a){return-1<b.indexOf(a)},setFlag:function(a){b+=a}};d<a.length;)(f=z(a,d,e,g))?(c.push(f.output),d+=f.match[0].length||1):(f=m.call(s[e],a.slice(d)))?(c.push(f[0]),d+=f[0].length):(f=a.charAt(d),"["===f?e=XRegExp.INSIDE_CLASS:"]"===f&&(e=XRegExp.OUTSIDE_CLASS),c.push(f),d++);c=RegExp(c.join(""),i.call(b,A,""));c._xregexp={source:a,captureNames:g.hasNamedCapture?g.captureNames:null};return c};XRegExp.version="1.5.1";XRegExp.INSIDE_CLASS= 1;XRegExp.OUTSIDE_CLASS=2;var B=/\$(?:(\d\d?|[$&`'])|{([$\w]+)})/g,A=/[^gimy]+|([\s\S])(?=[\s\S]*\1)/g,w=/^(?:[?*+]|{\d+(?:,\d*)?})\??/,q=!1,p=[];m=RegExp.prototype.exec;n=RegExp.prototype.test;t=String.prototype.match;i=String.prototype.replace;u=String.prototype.split;var C=m.call(/()??/,"")[1]===j,x=function(){var a=/^/g;n.call(a,"");return!a.lastIndex}(),y=RegExp.prototype.sticky!==j,s={};s[XRegExp.INSIDE_CLASS]=/^(?:\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S]))/; s[XRegExp.OUTSIDE_CLASS]=/^(?:\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|\(\?[:=!]|[?*+]\?|{\d+(?:,\d*)?}\??)/;XRegExp.addToken=function(a,b,c,e){p.push({pattern:k(a,"g"+(y?"y":"")),handler:b,scope:c||XRegExp.OUTSIDE_CLASS,trigger:e||null})};XRegExp.cache=function(a,b){var c=a+"/"+(b||"");return XRegExp.cache[c]||(XRegExp.cache[c]=XRegExp(a,b))};XRegExp.copyAsGlobal=function(a){return k(a,"g")};XRegExp.escape=function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&")};XRegExp.execAt=function(a,b,c,e){var d=k(b,"g"+(e&&y?"y":""));d.lastIndex=c=c||0;a=d.exec(a);e&&a&&a.index!==c&&(a=null);b.global&&(b.lastIndex=a?d.lastIndex:0);return a};XRegExp.freezeTokens=function(){XRegExp.addToken=function(){throw Error("can't run addToken after freezeTokens");}};XRegExp.isRegExp=function(a){return"[object RegExp]"===Object.prototype.toString.call(a)};XRegExp.iterate=function(a,b,c,e){for(var d=k(b,"g"),g=-1,f;f=d.exec(a);)b.global&&(b.lastIndex=d.lastIndex),c.call(e, f,++g,a,b),d.lastIndex===f.index&&d.lastIndex++;b.global&&(b.lastIndex=0)};XRegExp.matchChain=function(a,b){return function e(a,g){var f=b[g].regex?b[g]:{regex:b[g]},h=k(f.regex,"g"),l=[],o;for(o=0;o<a.length;o++)XRegExp.iterate(a[o],h,function(a){l.push(f.backref?a[f.backref]||"":a[0])});return g===b.length-1||!l.length?l:e(l,g+1)}([a],0)};RegExp.prototype.apply=function(a,b){return this.exec(b[0])};RegExp.prototype.call=function(a,b){return this.exec(b)};RegExp.prototype.exec=function(a){var b, c,e;this.global||(e=this.lastIndex);if(b=m.apply(this,arguments)){!C&&1<b.length&&-1<r(b,"")&&(c=RegExp(this.source,i.call(v(this),"g","")),i.call((a+"").slice(b.index),c,function(){for(var a=1;a<arguments.length-2;a++)arguments[a]===j&&(b[a]=j)}));if(this._xregexp&&this._xregexp.captureNames)for(var d=1;d<b.length;d++)(c=this._xregexp.captureNames[d-1])&&(b[c]=b[d]);!x&&this.global&&!b[0].length&&this.lastIndex>b.index&&this.lastIndex--}this.global||(this.lastIndex=e);return b};RegExp.prototype.test= function(a){var b;this.global||(b=this.lastIndex);(a=m.call(this,a))&&!x&&this.global&&!a[0].length&&this.lastIndex>a.index&&this.lastIndex--;this.global||(this.lastIndex=b);return!!a};String.prototype.match=function(a){XRegExp.isRegExp(a)||(a=RegExp(a));if(a.global){var b=t.apply(this,arguments);a.lastIndex=0;return b}return a.exec(this)};String.prototype.replace=function(a,b){var c=XRegExp.isRegExp(a),e,d,g;if(c){if(a._xregexp&&(e=a._xregexp.captureNames),!a.global)g=a.lastIndex}else a+="";d="[object Function]"=== Object.prototype.toString.call(b)?i.call(this+"",a,function(){if(e){arguments[0]=new String(arguments[0]);for(var f=0;f<e.length;f++)e[f]&&(arguments[0][e[f]]=arguments[f+1])}c&&a.global&&(a.lastIndex=arguments[arguments.length-2]+arguments[0].length);return b.apply(null,arguments)}):i.call(this+"",a,function(){var a=arguments;return i.call(b+"",B,function(b,c,d){if(c)switch(c){case "$":return"$";case "&":return a[0];case "`":return a[a.length-1].slice(0,a[a.length-2]);case "'":return a[a.length- 1].slice(a[a.length-2]+a[0].length);default:d="";c=+c;if(!c)return b;for(;c>a.length-3;)d=String.prototype.slice.call(c,-1)+d,c=Math.floor(c/10);return(c?a[c]||"":"$")+d}else{c=+d;if(c<=a.length-3)return a[c];c=e?r(e,d):-1;return-1<c?a[c+1]:b}})});c&&(a.lastIndex=a.global?0:g);return d};String.prototype.split=function(a,b){if(!XRegExp.isRegExp(a))return u.apply(this,arguments);var c=this+"",e=[],d=0,g,f;if(b===j||0>+b)b=Infinity;else if(b=Math.floor(+b),!b)return[];for(a=XRegExp.copyAsGlobal(a);(g= a.exec(c))&&!(a.lastIndex>d&&(e.push(c.slice(d,g.index)),1<g.length&&g.index<c.length&&Array.prototype.push.apply(e,g.slice(1)),f=g[0].length,d=a.lastIndex,e.length>=b));)a.lastIndex===g.index&&a.lastIndex++;d===c.length?(!n.call(a,"")||f)&&e.push(""):e.push(c.slice(d));return e.length>b?e.slice(0,b):e};XRegExp.addToken(/\(\?#[^)]*\)/,function(a){return n.call(w,a.input.slice(a.index+a[0].length))?"":"(?:)"});XRegExp.addToken(/\((?!\?)/,function(){this.captureNames.push(null);return"("});XRegExp.addToken(/\(\?<([$\w]+)>/, function(a){this.captureNames.push(a[1]);this.hasNamedCapture=!0;return"("});XRegExp.addToken(/\\k<([\w$]+)>/,function(a){var b=r(this.captureNames,a[1]);return-1<b?"\\"+(b+1)+(isNaN(a.input.charAt(a.index+a[0].length))?"":"(?:)"):a[0]});XRegExp.addToken(/\[\^?]/,function(a){return"[]"===a[0]?"\\b\\B":"[\\s\\S]"});XRegExp.addToken(/^\(\?([imsx]+)\)/,function(a){this.setFlag(a[1]);return""});XRegExp.addToken(/(?:\s+|#.*)+/,function(a){return n.call(w,a.input.slice(a.index+a[0].length))?"":"(?:)"}, XRegExp.OUTSIDE_CLASS,function(){return this.hasFlag("x")});XRegExp.addToken(/\./,function(){return"[\\s\\S]"},XRegExp.OUTSIDE_CLASS,function(){return this.hasFlag("s")})})();