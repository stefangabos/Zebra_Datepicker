(function(c){c.Zebra_DatePicker=function(ga,ha){var ka={always_visible:!1,days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),days_abbr:!1,direction:0,disabled_dates:!1,enabled_dates:!1,first_day_of_week:1,format:"Y-m-d",inside:!0,lang_clear_date:"Clear date",months:"January February March April May June July August September October November December".split(" "),months_abbr:!1,offset:[5,-5],pair:!1,readonly_element:!0,select_other_months:!1,show_clear_date:0,show_icon:!0,show_other_months:!0, show_select_today:"Today",show_week_number:!1,start_date:!1,view:"days",weekend_days:[0,6],zero_pad:!1,onChange:null,onClear:null,onSelect:null},w,p,q,E,F,H,I,S,T,M,Y,m,r,A,x,h,Z,N,O,U,G,$,t,u,aa,P,V,la,ma,na,C,ia,ba,W,ca,oa,a=this;a.settings={};var d=c(ga),ua=function(e){if(!e){a.settings=c.extend({},ka,ha);for(var b in d.data())0===b.indexOf("zdp_")&&(b=b.replace(/^zdp\_/,""),void 0!==ka[b]&&(a.settings[b]=d.data("zdp_"+b)))}a.settings.readonly_element&&d.attr("readonly","readonly");b={days:["d", "j","D"],months:["F","m","M","n","t"],years:["o","Y","y"]};var z=!1,g=!1,v=!1,k=null;for(k in b)c.each(b[k],function(b,c){-1<a.settings.format.indexOf(c)&&("days"==k?z=!0:"months"==k?g=!0:"years"==k&&(v=!0))});C=z&&g&&v?["years","months","days"]:!z&&g&&v?["years","months"]:z||g||!v?z||!g||v?["years","months","days"]:["months"]:["years"];-1==c.inArray(a.settings.view,C)&&(a.settings.view=C[C.length-1]);G=[];U=[];for(var f=0;2>f;f++)b=0===f?a.settings.disabled_dates:a.settings.enabled_dates,c.isArray(b)&& 0<b.length&&c.each(b,function(){for(var a=this.split(" "),b=0;4>b;b++){a[b]||(a[b]="*");a[b]=-1<a[b].indexOf(",")?a[b].split(","):Array(a[b]);for(var e=0;e<a[b].length;e++)if(-1<a[b][e].indexOf("-")){var g=a[b][e].match(/^([0-9]+)\-([0-9]+)/);if(null!==g){for(var z=n(g[1]);z<=n(g[2]);z++)-1==c.inArray(z,a[b])&&a[b].push(z+"");a[b].splice(e,1)}}for(e=0;e<a[b].length;e++)a[b][e]=isNaN(n(a[b][e]))?a[b][e]:n(a[b][e])}0===f?G.push(a):U.push(a)});b=new Date;var B=a.settings.reference_date?a.settings.reference_date: d.data("zdp_reference_date")&&void 0!==d.data("zdp_reference_date")?d.data("zdp_reference_date"):b,l,K;u=t=void 0;m=B.getMonth();T=b.getMonth();r=B.getFullYear();M=b.getFullYear();A=B.getDate();Y=b.getDate();if(!0===a.settings.direction)t=B;else if(!1===a.settings.direction)u=B,V=u.getMonth(),P=u.getFullYear(),aa=u.getDate();else if(!c.isArray(a.settings.direction)&&X(a.settings.direction)&&0<n(a.settings.direction)||c.isArray(a.settings.direction)&&((l=da(a.settings.direction[0]))||!0===a.settings.direction[0]|| X(a.settings.direction[0])&&0<a.settings.direction[0])&&((K=da(a.settings.direction[1]))||!1===a.settings.direction[1]||X(a.settings.direction[1])&&0<=a.settings.direction[1]))t=l?l:new Date(r,m,A+(c.isArray(a.settings.direction)?n(!0===a.settings.direction[0]?0:a.settings.direction[0]):n(a.settings.direction))),m=t.getMonth(),r=t.getFullYear(),A=t.getDate(),K&&+K>=+t?u=K:!K&&!1!==a.settings.direction[1]&&c.isArray(a.settings.direction)&&(u=new Date(r,m,A+n(a.settings.direction[1]))),u&&(V=u.getMonth(), P=u.getFullYear(),aa=u.getDate());else if(!c.isArray(a.settings.direction)&&X(a.settings.direction)&&0>n(a.settings.direction)||c.isArray(a.settings.direction)&&(!1===a.settings.direction[0]||X(a.settings.direction[0])&&0>a.settings.direction[0])&&((l=da(a.settings.direction[1]))||X(a.settings.direction[1])&&0<=a.settings.direction[1]))u=new Date(r,m,A+(c.isArray(a.settings.direction)?n(!1===a.settings.direction[0]?0:a.settings.direction[0]):n(a.settings.direction))),V=u.getMonth(),P=u.getFullYear(), aa=u.getDate(),l&&+l<+u?t=l:!l&&c.isArray(a.settings.direction)&&(t=new Date(P,V,aa-n(a.settings.direction[1]))),t&&(m=t.getMonth(),r=t.getFullYear(),A=t.getDate());else if(c.isArray(a.settings.disabled_dates)&&0<a.settings.disabled_dates.length)for(var s in G)if("*"==G[s][0]&&"*"==G[s][1]&&"*"==G[s][2]&&"*"==G[s][3]){var fa=[];c.each(U,function(){"*"!=this[2][0]&&fa.push(parseInt(this[2][0]+("*"==this[1][0]?"12":y(this[1][0],2))+("*"==this[0][0]?"*"==this[1][0]?"31":(new Date(this[2][0],this[1][0], 0)).getDate():y(this[0][0],2)),10))});fa.sort();if(0<fa.length){var Q=(fa[0]+"").match(/([0-9]{4})([0-9]{2})([0-9]{2})/);r=parseInt(Q[1],10);m=parseInt(Q[2],10)-1;A=parseInt(Q[3],10)}break}if(D(r,m,A)){for(;D(r);)t?(r++,m=0):(r--,m=11);for(;D(r,m);)t?(m++,A=1):(m--,A=(new Date(r,m+1,0)).getDate()),11<m?(r++,m=0,A=1):0>m&&(r--,m=11,A=(new Date(r,m+1,0)).getDate());for(;D(r,m,A);)t?A++:A--,b=new Date(r,m,A),r=b.getFullYear(),m=b.getMonth(),A=b.getDate();b=new Date(r,m,A);r=b.getFullYear();m=b.getMonth(); A=b.getDate()}(l=da(d.val()||(a.settings.start_date?a.settings.start_date:"")))&&D(l.getFullYear(),l.getMonth(),l.getDate())&&d.val("");pa(l);if(!a.settings.always_visible&&(e||(a.settings.show_icon?("firefox"==L.name&&d.is('input[type="text"]')&&"inline"==d.css("display")&&d.css("display","inline-block"),l=jQuery('<span class="Zebra_DatePicker_Icon_Wrapper"></span>').css({display:d.css("display"),position:"static"==d.css("position")?"relative":d.css("position"),"float":d.css("float"),top:d.css("top"), right:d.css("right"),bottom:d.css("bottom"),left:d.css("left")}),d.wrap(l).css({position:"relative",top:"auto",right:"auto",bottom:"auto",left:"auto"}),q=jQuery('<button type="button" class="Zebra_DatePicker_Icon'+("disabled"==d.attr("disabled")?" Zebra_DatePicker_Icon_Disabled":"")+'">Pick a date</button>'),a.icon=q,ia=q.add(d)):ia=d,ia.bind("click",function(b){b.preventDefault();d.attr("disabled")||("none"!=p.css("display")?a.hide():a.show())}),void 0!==q&&q.insertAfter(d)),void 0!==q)){q.attr("style", "");a.settings.inside&&q.addClass("Zebra_DatePicker_Icon_Inside");l=d.outerWidth();K=d.outerHeight();s=parseInt(d.css("marginLeft"),10)||0;b=parseInt(d.css("marginTop"),10)||0;var B=q.outerWidth(),qa=q.outerHeight(),xa=parseInt(q.css("marginLeft"),10)||0,ya=parseInt(q.css("marginRight"),10)||0;a.settings.inside?q.css({top:b+(K-qa)/2,left:s+(l-B-ya)}):q.css({top:b+(K-qa)/2,left:s+l+xa})}void 0!==q&&(d.is(":visible")?q.show():q.hide());ca=!1!==a.settings.show_select_today&&-1<c.inArray("days",C)&&!D(M, T,Y)?a.settings.show_select_today:!1;e||(c(window).bind("resize",ra),p=c('<div class="Zebra_DatePicker"><table class="dp_header"><tr><td class="dp_previous">&#171;</td><td class="dp_caption">&#032;</td><td class="dp_next">&#187;</td></tr></table><table class="dp_daypicker"></table><table class="dp_monthpicker"></table><table class="dp_yearpicker"></table><table class="dp_footer"><tr><td class="dp_today"'+(!1!==a.settings.show_clear_date?' style="width:50%"':"")+">"+ca+'</td><td class="dp_clear"'+ (!1!==ca?' style="width:50%"':"")+">"+a.settings.lang_clear_date+"</td></tr></table></div>"),a.datepicker=p,E=c("table.dp_header",p),F=c("table.dp_daypicker",p),H=c("table.dp_monthpicker",p),I=c("table.dp_yearpicker",p),W=c("table.dp_footer",p),ba=c("td.dp_today",W),S=c("td.dp_clear",W),a.settings.always_visible?d.attr("disabled")||(a.settings.always_visible.append(p),a.show()):c("body").append(p),p.delegate("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked, .dp_week_number)", "mouseover",function(){c(this).addClass("dp_hover")}).delegate("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked, .dp_week_number)","mouseout",function(){c(this).removeClass("dp_hover")}),za(c("td",E)),c(".dp_previous",E).bind("click",function(){c(this).hasClass("dp_blocked")||("months"==w?h--:"years"==w?h-=12:0>--x&&(x=11,h--),R())}),c(".dp_caption",E).bind("click",function(){w="days"==w?-1<c.inArray("months",C)?"months":-1<c.inArray("years",C)?"years":"days":"months"==w? -1<c.inArray("years",C)?"years":-1<c.inArray("days",C)?"days":"months":-1<c.inArray("days",C)?"days":-1<c.inArray("months",C)?"months":"years";R()}),c(".dp_next",E).bind("click",function(){c(this).hasClass("dp_blocked")||("months"==w?h++:"years"==w?h+=12:12==++x&&(x=0,h++),R())}),F.delegate("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_week_number)","click",function(){a.settings.select_other_months&&null!==(Q=c(this).attr("class").match(/date\_([0-9]{4})(0[1-9]|1[012])(0[1-9]|[12][0-9]|3[01])/))? ea(Q[1],Q[2],Q[3],"days",c(this)):ea(h,x,n(c(this).html()),"days",c(this))}),H.delegate("td:not(.dp_disabled)","click",function(){var b=c(this).attr("class").match(/dp\_month\_([0-9]+)/);x=n(b[1]);-1==c.inArray("days",C)?ea(h,x,1,"months",c(this)):(w="days",a.settings.always_visible&&d.val(""),R())}),I.delegate("td:not(.dp_disabled)","click",function(){h=n(c(this).html());-1==c.inArray("months",C)?ea(h,1,1,"years",c(this)):(w="months",a.settings.always_visible&&d.val(""),R())}),c(ba).bind("click", function(b){b.preventDefault();ea(M,T,Y,"days",c(".dp_current",F));a.settings.always_visible&&a.show();a.hide()}),c(S).bind("click",function(b){b.preventDefault();d.val("");a.settings.always_visible||(h=x=O=N=Z=null);a.hide();if(a.settings.onClear&&"function"==typeof a.settings.onClear)a.settings.onClear(d)}),a.settings.always_visible||c(document).bind({mousedown:sa,keyup:ta}),R())};a.destroy=function(){void 0!==a.icon&&a.icon.remove();a.datepicker.remove();c(document).unbind("keyup",ta);c(document).unbind("mousedown", sa);c(window).unbind("resize",ra);d.removeData("Zebra_DatePicker");delete a};a.hide=function(){a.settings.always_visible||(va("hide"),p.hide())};a.show=function(){w=a.settings.view;var e=da(d.val()||(a.settings.start_date?a.settings.start_date:""));e?(N=e.getMonth(),x=e.getMonth(),O=e.getFullYear(),h=e.getFullYear(),Z=e.getDate(),D(O,N,Z)&&(d.val(""),x=m,h=r)):(x=m,h=r);R();if(a.settings.always_visible)p.show();else{var e=p.outerWidth(),b=p.outerHeight(),z=(void 0!==q?q.offset().left+q.outerWidth(!0): d.offset().left+d.outerWidth(!0))+a.settings.offset[0],g=(void 0!==q?q.offset().top:d.offset().top)-b+a.settings.offset[1],v=c(window).width(),k=c(window).height(),f=c(window).scrollTop(),B=c(window).scrollLeft();z+e>B+v&&(z=B+v-e);z<B&&(z=B);g+b>f+k&&(g=f+k-b);g<f&&(g=f);p.css({left:z,top:g});p.fadeIn("explorer"==L.name&&9>L.version?0:150,"linear");va()}};a.update=function(e){a.original_direction&&(a.original_direction=a.direction);a.settings=c.extend(a.settings,e);ua(!0)};var da=function(e){e+= "";if(""!==c.trim(e)){for(var b=a.settings.format.replace(/([-.,*+?^${}()|[\]\/\\])/g,"\\$1"),z="dDjlNSwFmMnYy".split(""),g=[],v=[],k=null,f=null,d=0;d<z.length;d++)-1<(k=b.indexOf(z[d]))&&g.push({character:z[d],position:k});g.sort(function(a,b){return a.position-b.position});c.each(g,function(a,b){switch(b.character){case "d":v.push("0[1-9]|[12][0-9]|3[01]");break;case "D":v.push("[a-z]{3}");break;case "j":v.push("[1-9]|[12][0-9]|3[01]");break;case "l":v.push("[a-z]+");break;case "N":v.push("[1-7]"); break;case "S":v.push("st|nd|rd|th");break;case "w":v.push("[0-6]");break;case "F":v.push("[a-z]+");break;case "m":v.push("0[1-9]|1[012]+");break;case "M":v.push("[a-z]{3}");break;case "n":v.push("[1-9]|1[012]");break;case "Y":v.push("[0-9]{4}");break;case "y":v.push("[0-9]{2}")}});if(v.length&&(g.reverse(),c.each(g,function(a,c){b=b.replace(c.character,"("+v[v.length-a-1]+")")}),v=RegExp("^"+b+"$","ig"),f=v.exec(e))){e=new Date;var l=e.getDate(),h=e.getMonth()+1,s=e.getFullYear(),m="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "), p="January February March April May June July August September October November December".split(" "),r,q=!0;g.reverse();c.each(g,function(b,e){if(!q)return!0;switch(e.character){case "m":case "n":h=n(f[b+1]);break;case "d":case "j":l=n(f[b+1]);break;case "D":case "l":case "F":case "M":r="D"==e.character||"l"==e.character?a.settings.days:a.settings.months;q=!1;c.each(r,function(a,c){if(q)return!0;if(f[b+1].toLowerCase()==c.substring(0,"D"==e.character||"M"==e.character?3:c.length).toLowerCase()){switch(e.character){case "D":f[b+ 1]=m[a].substring(0,3);break;case "l":f[b+1]=m[a];break;case "F":f[b+1]=p[a];h=a+1;break;case "M":f[b+1]=p[a].substring(0,3),h=a+1}q=!0}});break;case "Y":s=n(f[b+1]);break;case "y":s="19"+n(f[b+1])}});if(q&&(g=new Date(s,(h||1)-1,l||1),g.getFullYear()==s&&g.getDate()==(l||1)&&g.getMonth()==(h||1)-1))return g}return!1}},za=function(a){"firefox"==L.name?a.css("MozUserSelect","none"):"explorer"==L.name?a.bind("selectstart",function(){return!1}):a.mousedown(function(){return!1})},wa=function(){var e= (new Date(h,x+1,0)).getDate(),b=(new Date(h,x,1)).getDay(),z=(new Date(h,x,0)).getDate(),b=b-a.settings.first_day_of_week,b=0>b?7+b:b;ja(a.settings.months[x]+", "+h);var g="<tr>";a.settings.show_week_number&&(g+="<th>"+a.settings.show_week_number+"</th>");for(var d=0;7>d;d++)g+="<th>"+(c.isArray(a.settings.days_abbr)&&void 0!==a.settings.days_abbr[(a.settings.first_day_of_week+d)%7]?a.settings.days_abbr[(a.settings.first_day_of_week+d)%7]:a.settings.days[(a.settings.first_day_of_week+d)%7].substr(0, 2))+"</th>";g+="</tr><tr>";for(d=0;42>d;d++){0<d&&0===d%7&&(g+="</tr><tr>");if(0===d%7&&a.settings.show_week_number){var k=new Date(h,x,d-b+1),f=k.getFullYear(),B=k.getMonth()+1,k=k.getDate(),l=void 0,m=void 0,s=void 0,q=s=void 0,n=void 0,s=m=l=void 0;3>B?(l=f-1,m=(l/4|0)-(l/100|0)+(l/400|0),s=((l-1)/4|0)-((l-1)/100|0)+((l-1)/400|0),s=m-s,q=0,n=k-1+31*(B-1)):(l=f,m=(l/4|0)-(l/100|0)+(l/400|0),s=((l-1)/4|0)-((l-1)/100|0)+((l-1)/400|0),s=m-s,q=s+1,n=k+((153*(B-3)+2)/5|0)+58+s);l=(l+m)%7;k=(n+l-q)%7; m=n+3-k;s=0>m?53-((l-s)/5|0):m>364+s?1:(m/7|0)+1;g+='<td class="dp_week_number">'+s+"</td>"}f=d-b+1;if(a.settings.select_other_months&&(d<b||f>e))var p=new Date(h,x,f),r=p.getFullYear(),t=p.getMonth(),u=p.getDate(),p=r+y(t,2)+y(u,2);d<b?g+='<td class="'+(a.settings.select_other_months&&!D(r,t,u)?"dp_not_in_month_selectable date_"+p:"dp_not_in_month")+'">'+(a.settings.select_other_months||a.settings.show_other_months?y(z-b+d+1,a.settings.zero_pad?2:0):"&nbsp;")+"</td>":f>e?g+='<td class="'+(a.settings.select_other_months&& !D(r,t,u)?"dp_not_in_month_selectable date_"+p:"dp_not_in_month")+'">'+(a.settings.select_other_months||a.settings.show_other_months?y(f-e,a.settings.zero_pad?2:0):"&nbsp;")+"</td>":(B=(a.settings.first_day_of_week+d)%7,k="",D(h,x,f)?(k=-1<c.inArray(B,a.settings.weekend_days)?"dp_weekend_disabled":k+" dp_disabled",x==T&&h==M&&Y==f&&(k+=" dp_disabled_current")):(-1<c.inArray(B,a.settings.weekend_days)&&(k="dp_weekend"),x==N&&h==O&&Z==f&&(k+=" dp_selected"),x==T&&h==M&&Y==f&&(k+=" dp_current")),g+= "<td"+(""!==k?' class="'+c.trim(k)+'"':"")+">"+(a.settings.zero_pad?y(f,2):f)+"</td>")}F.html(c(g+"</tr>"));a.settings.always_visible&&(la=c("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked, .dp_week_number)",F));F.show()},Aa=function(){ja(h);for(var e="<tr>",b=0;12>b;b++){0<b&&0===b%3&&(e+="</tr><tr>");var d="dp_month_"+b;D(h,b)?d+=" dp_disabled":!1!==N&&N==b?d+=" dp_selected":T==b&&M==h&&(d+=" dp_current");e+='<td class="'+c.trim(d)+'">'+(c.isArray(a.settings.months_abbr)&& void 0!==a.settings.months_abbr[b]?a.settings.months_abbr[b]:a.settings.months[b].substr(0,3))+"</td>"}H.html(c(e+"</tr>"));a.settings.always_visible&&(ma=c("td:not(.dp_disabled)",H));H.show()},Ba=function(){ja(h-7+" - "+(h+4));for(var e="<tr>",b=0;12>b;b++){0<b&&0===b%3&&(e+="</tr><tr>");var d="";D(h-7+b)?d+=" dp_disabled":O&&O==h-7+b?d+=" dp_selected":M==h-7+b&&(d+=" dp_current");e+="<td"+(""!==c.trim(d)?' class="'+c.trim(d)+'"':"")+">"+(h-7+b)+"</td>"}I.html(c(e+"</tr>"));a.settings.always_visible&& (na=c("td:not(.dp_disabled)",I));I.show()},va=function(a){if("explorer"==L.name&&6==L.version){if(!$){var b=n(p.css("zIndex"))-1;$=jQuery("<iframe>",{src:'javascript:document.write("")',scrolling:"no",frameborder:0,allowtransparency:"true",css:{zIndex:b,position:"absolute",top:-1E3,left:-1E3,width:p.outerWidth(),height:p.outerHeight(),filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)",display:"none"}});c("body").append($)}switch(a){case "hide":$.hide();break;default:a=p.offset(),$.css({top:a.top, left:a.left,display:"block"})}}},D=function(e,b,d){if((void 0===e||isNaN(e))&&(void 0===b||isNaN(b))&&(void 0===d||isNaN(d)))return!1;if(c.isArray(a.settings.direction)||0!==n(a.settings.direction)){var g=n(J(e,"undefined"!=typeof b?y(b,2):"","undefined"!=typeof d?y(d,2):"")),h=(g+"").length;if(8==h&&("undefined"!=typeof t&&g<n(J(r,y(m,2),y(A,2)))||"undefined"!=typeof u&&g>n(J(P,y(V,2),y(aa,2))))||6==h&&("undefined"!=typeof t&&g<n(J(r,y(m,2)))||"undefined"!=typeof u&&g>n(J(P,y(V,2))))||4==h&&("undefined"!= typeof t&&g<r||"undefined"!=typeof u&&g>P))return!0}"undefined"!=typeof b&&(b+=1);var k=!1,f=!1;G&&c.each(G,function(){if(!k&&(-1<c.inArray(e,this[2])||-1<c.inArray("*",this[2]))&&("undefined"!=typeof b&&-1<c.inArray(b,this[1])||-1<c.inArray("*",this[1]))&&("undefined"!=typeof d&&-1<c.inArray(d,this[0])||-1<c.inArray("*",this[0]))){if("*"==this[3])return k=!0;var a=(new Date(e,b-1,d)).getDay();if(-1<c.inArray(a,this[3]))return k=!0}});U&&c.each(U,function(){if(!f&&(-1<c.inArray(e,this[2])||-1<c.inArray("*", this[2]))&&(f=!0,"undefined"!=typeof b))if(f=!0,-1<c.inArray(b,this[1])||-1<c.inArray("*",this[1])){if("undefined"!=typeof d){f=!0;if(-1<c.inArray(d,this[0])||-1<c.inArray("*",this[0])){if("*"==this[3])return f=!0;var a=(new Date(e,b-1,d)).getDay();if(-1<c.inArray(a,this[3]))return f=!0}f=!1}}else f=!1});return U&&f||!G||!k?!1:!0},X=function(a){return(a+"").match(/^\-?[0-9]+$/)?!0:!1},ja=function(e){c(".dp_caption",E).html(e);if(c.isArray(a.settings.direction)||0!==n(a.settings.direction)||1==C.length&& "months"==C[0]){e=h;var b=x,d,g;if("days"==w)g=!D(0>b-1?J(e-1,"11"):J(e,y(b-1,2))),d=!D(11<b+1?J(e+1,"00"):J(e,y(b+1,2)));else if("months"==w){if(!t||t.getFullYear()<=e-1)g=!0;if(!u||u.getFullYear()>=e+1)d=!0}else if("years"==w){if(!t||t.getFullYear()<e-7)g=!0;if(!u||u.getFullYear()>e+4)d=!0}g?c(".dp_previous",E).removeClass("dp_blocked"):(c(".dp_previous",E).addClass("dp_blocked"),c(".dp_previous",E).removeClass("dp_hover"));d?c(".dp_next",E).removeClass("dp_blocked"):(c(".dp_next",E).addClass("dp_blocked"), c(".dp_next",E).removeClass("dp_hover"))}},R=function(){if(""===F.text()||"days"==w){if(""===F.text()){a.settings.always_visible||p.css("left",-1E3);p.show();wa();var e=F.outerWidth(),b=F.outerHeight();H.css({width:e,height:b});I.css({width:e,height:b});E.css("width",e);W.css("width",e);p.hide()}else wa();H.hide();I.hide()}else"months"==w?(Aa(),F.hide(),I.hide()):"years"==w&&(Ba(),F.hide(),H.hide());a.settings.onChange&&"function"==typeof a.settings.onChange&&void 0!==w&&(e="days"==w?F.find("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked)"): "months"==w?H.find("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked)"):I.find("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked)"),e.each(function(){if("days"==w)c(this).data("date",h+"-"+y(x+1,2)+"-"+y(n(c(this).text()),2));else if("months"==w){var a=c(this).attr("class").match(/dp\_month\_([0-9]+)/);c(this).data("date",h+"-"+y(n(a[1])+1,2))}else c(this).data("date",n(c(this).text()))}),a.settings.onChange(w,e,d));W.show();!0===a.settings.show_clear_date|| 0===a.settings.show_clear_date&&""!==d.val()||a.settings.always_visible&&!1!==a.settings.show_clear_date?(S.show(),ca?(ba.css("width","50%"),S.css("width","50%")):(ba.hide(),S.css("width","100%"))):(S.hide(),ca?ba.show().css("width","100%"):W.hide())},ea=function(e,b,m,g,p){var k=new Date(e,b,m,12,0,0);g="days"==g?la:"months"==g?ma:na;var f;f="";for(var n=k.getDate(),l=k.getDay(),q=a.settings.days[l],s=k.getMonth()+1,r=a.settings.months[s-1],t=k.getFullYear()+"",u=0;u<a.settings.format.length;u++){var w= a.settings.format.charAt(u);switch(w){case "y":t=t.substr(2);case "Y":f+=t;break;case "m":s=y(s,2);case "n":f+=s;break;case "M":r=c.isArray(a.settings.months_abbr)&&void 0!==a.settings.months_abbr[s-1]?a.settings.months_abbr[s-1]:a.settings.months[s-1].substr(0,3);case "F":f+=r;break;case "d":n=y(n,2);case "j":f+=n;break;case "D":q=c.isArray(a.settings.days_abbr)&&void 0!==a.settings.days_abbr[l]?a.settings.days_abbr[l]:a.settings.days[l].substr(0,3);case "l":f+=q;break;case "N":l++;case "w":f+=l; break;case "S":f=1==n%10&&"11"!=n?f+"st":2==n%10&&"12"!=n?f+"nd":3==n%10&&"13"!=n?f+"rd":f+"th";break;default:f+=w}}d.val(f);a.settings.always_visible&&(N=k.getMonth(),x=k.getMonth(),O=k.getFullYear(),h=k.getFullYear(),Z=k.getDate(),g.removeClass("dp_selected"),p.addClass("dp_selected"));a.hide();pa(k);if(a.settings.onSelect&&"function"==typeof a.settings.onSelect)a.settings.onSelect(f,e+"-"+y(b+1,2)+"-"+y(m,2),k,d);d.focus()},J=function(){for(var a="",b=0;b<arguments.length;b++)a+=arguments[b]+""; return a},y=function(a,b){for(a+="";a.length<b;)a="0"+a;return a},n=function(a){return parseInt(a,10)},pa=function(e){a.settings.pair&&c.each(a.settings.pair,function(){var a=c(this);a.data&&a.data("Zebra_DatePicker")?(a=a.data("Zebra_DatePicker"),a.update({reference_date:e,direction:0===a.settings.direction?1:a.settings.direction}),a.settings.always_visible&&a.show()):a.data("zdp_reference_date",e)})},ta=function(c){"block"!=p.css("display")&&27!=c.which||a.hide()},sa=function(e){if("block"==p.css("display")){if(a.settings.show_icon&& c(e.target).get(0)===q.get(0))return!0;0===c(e.target).parents().filter(".Zebra_DatePicker").length&&a.hide()}},ra=function(){a.hide();void 0!==q&&(clearTimeout(oa),oa=setTimeout(function(){a.update()},100))},L={init:function(){this.name=this.searchString(this.dataBrowser)||"";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||""},searchString:function(a){for(var b=0;b<a.length;b++){var c=a[b].string,d=a[b].prop;this.versionSearchString=a[b].versionSearch|| a[b].identity;if(c){if(-1!=c.indexOf(a[b].subString))return a[b].identity}else if(d)return a[b].identity}},searchVersion:function(a){var b=a.indexOf(this.versionSearchString);if(-1!=b)return parseFloat(a.substring(b+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Firefox",identity:"firefox"},{string:navigator.userAgent,subString:"MSIE",identity:"explorer",versionSearch:"MSIE"}]};L.init();ua()};c.fn.Zebra_DatePicker=function(ga){return this.each(function(){void 0!== c(this).data("Zebra_DatePicker")&&c(this).data("Zebra_DatePicker").destroy();var ha=new c.Zebra_DatePicker(this,ga);c(this).data("Zebra_DatePicker",ha)})}})(jQuery);